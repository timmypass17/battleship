(()=>{"use strict";var e={56:(e,r,n)=>{e.exports=function(e){var r=n.nc;r&&e.setAttribute("nonce",r)}},72:e=>{var r=[];function n(e){for(var n=-1,t=0;t<r.length;t++)if(r[t].identifier===e){n=t;break}return n}function t(e,t){for(var i={},o=[],s=0;s<e.length;s++){var l=e[s],c=t.base?l[0]+t.base:l[0],p=i[c]||0,d="".concat(c," ").concat(p);i[c]=p+1;var A=n(d),h={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==A)r[A].references++,r[A].updater(h);else{var u=a(h,t);t.byIndex=s,r.splice(s,0,{identifier:d,updater:u,references:1})}o.push(d)}return o}function a(e,r){var n=r.domAPI(r);return n.update(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap&&r.supports===e.supports&&r.layer===e.layer)return;n.update(e=r)}else n.remove()}}e.exports=function(e,a){var i=t(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var s=n(i[o]);r[s].references--}for(var l=t(e,a),c=0;c<i.length;c++){var p=n(i[c]);0===r[p].references&&(r[p].updater(),r.splice(p,1))}i=l}}},113:e=>{e.exports=function(e,r){if(r.styleSheet)r.styleSheet.cssText=e;else{for(;r.firstChild;)r.removeChild(r.firstChild);r.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var r=[];return r.toString=function(){return this.map(function(r){var n="",t=void 0!==r[5];return r[4]&&(n+="@supports (".concat(r[4],") {")),r[2]&&(n+="@media ".concat(r[2]," {")),t&&(n+="@layer".concat(r[5].length>0?" ".concat(r[5]):""," {")),n+=e(r),t&&(n+="}"),r[2]&&(n+="}"),r[4]&&(n+="}"),n}).join("")},r.i=function(e,n,t,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(t)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(o[l]=!0)}for(var c=0;c<e.length;c++){var p=[].concat(e[c]);t&&o[p[0]]||(void 0!==i&&(void 0===p[5]||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=i),n&&(p[2]?(p[1]="@media ".concat(p[2]," {").concat(p[1],"}"),p[2]=n):p[2]=n),a&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=a):p[4]="".concat(a)),r.push(p))}},r}},354:e=>{e.exports=function(e){var r=e[1],n=e[3];if(!n)return r;if("function"==typeof btoa){var t=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),a="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(t),i="/*# ".concat(a," */");return[r].concat([i]).join("\n")}return[r].join("\n")}},365:(e,r,n)=>{n.d(r,{A:()=>s});var t=n(354),a=n.n(t),i=n(314),o=n.n(i)()(a());o.push([e.id,':root {\n  --player-primary-color: 61, 107, 255;\n  --computer-primary-color: 255, 168, 97;\n  --dark-blue: rgb(95, 98, 116);\n  --cell-color: rgb(227, 227, 227);\n}\n\n* {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n  font-family: "Roboto", sans-serif;\n  color: var(--dark-blue);\n}\n\nmain {\n  display: flex;\n  flex-wrap: wrap;\n\n  margin: 50px;\n  justify-content: center;\n  gap: clamp(50px, 10vw, 120px);\n}\n\n.board-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 350px;\n  gap: 16px;\n}\n\n.board {\n  display: grid;\n  grid-template-columns: repeat(11, 1fr);\n  grid-template-rows: repeat(11, 1fr);\n  width: 340px;\n  height: 340px;\n  flex-shrink: 0;\n  gap: 1px;\n}\n\n.grid-label {\n  align-content: center;\n  text-align: center;\n  font-size: 12px;\n}\n\n.cell {\n  border: 1px solid var(--cell-color);\n}\n\n.computer-container .cell {\n  cursor: pointer;\n}\n\n.player-container .ship {\n  background-color: rgb(var(--player-primary-color), 0.25);\n}\n\n.computer-container .ship {\n  /* For debugging computer */\n  /* background-color: rgba(255, 158, 61, 0.1); */\n}\n\n.hit,\n.miss {\n  cursor: default;\n}\n\n.player-container .hit {\n  background-color: rgb(var(--player-primary-color));\n}\n\n.computer-container .hit {\n  background-color: rgb(var(--computer-primary-color), 0.25);\n}\n\n.miss {\n  background-color: var(--dark-blue);\n}\n\n.computer-container .sunk {\n  background-color: rgb(var(--computer-primary-color));\n}\n\n.ships-container {\n  display: flex;\n  gap: 16px;\n  flex-wrap: wrap;\n}\n\n.ship-piece {\n  display: flex;\n  gap: 1px;\n  cursor: pointer;\n}\n\n.ship-piece div {\n  background-color: rgb(var(--player-primary-color), 0.25);\n  height: 30px;\n  width: 30px;\n}\n\n.ship-3 {\n  display: flex;\n\n  width: calc((30px + 1px) * 5);\n  /* grid-template-columns: repeat(auto-fill, minmax(30px, 1fr)); */\n}\n\n.ship-2 {\n  /* grid-template-columns: repeat(auto-fill, minmax(30px, 1fr)); */\n}\n\n[data-horizontal="true"] {\n  flex-direction: row;\n}\n\n[data-horizontal="false"] {\n  flex-direction: column;\n}\n\n.disabled {\n  pointer-events: none;\n  opacity: 0.5; /* optional */\n}\n\n.description {\n}\n\n.ships-remaining-container {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  margin-top: 36px;\n  width: 60px;\n}\n\n.ship-remaining-piece {\n  display: flex;\n  gap: 1px;\n}\n\n.player-container .ship-remaining-piece div {\n  background-color: rgba(var(--player-primary-color), 0.1);\n}\n\n.computer-container .ship-remaining-piece div {\n  background-color: rgba(var(--computer-primary-color), 0.2);\n}\n\n.ship-remaining-piece div {\n  height: 8px;\n  width: 8px;\n}\n\n.player-container {\n  display: flex;\n  align-items: flex-start;\n  gap: 16px;\n}\n\n.computer-container {\n  display: flex;\n  align-items: flex-start;\n  gap: 16px;\n}\n\n.computer-container .ships-remaining-container {\n  flex-direction: row-reverse;\n}\n\n.hidden {\n  visibility: hidden;\n}\n\n.game-result {\n  text-align: center;\n  white-space: pre-line;\n}\n\n.play-btn {\n  padding: 4px;\n}\n',"",{version:3,sources:["webpack://./src/styles.css"],names:[],mappings:"AAAA;EACE,oCAAoC;EACpC,sCAAsC;EACtC,6BAA6B;EAC7B,gCAAgC;AAClC;;AAEA;EACE,sBAAsB;EACtB,SAAS;EACT,UAAU;EACV,iCAAiC;EACjC,uBAAuB;AACzB;;AAEA;EACE,aAAa;EACb,eAAe;;EAEf,YAAY;EACZ,uBAAuB;EACvB,6BAA6B;AAC/B;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,YAAY;EACZ,SAAS;AACX;;AAEA;EACE,aAAa;EACb,sCAAsC;EACtC,mCAAmC;EACnC,YAAY;EACZ,aAAa;EACb,cAAc;EACd,QAAQ;AACV;;AAEA;EACE,qBAAqB;EACrB,kBAAkB;EAClB,eAAe;AACjB;;AAEA;EACE,mCAAmC;AACrC;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,wDAAwD;AAC1D;;AAEA;EACE,2BAA2B;EAC3B,+CAA+C;AACjD;;AAEA;;EAEE,eAAe;AACjB;;AAEA;EACE,kDAAkD;AACpD;;AAEA;EACE,0DAA0D;AAC5D;;AAEA;EACE,kCAAkC;AACpC;;AAEA;EACE,oDAAoD;AACtD;;AAEA;EACE,aAAa;EACb,SAAS;EACT,eAAe;AACjB;;AAEA;EACE,aAAa;EACb,QAAQ;EACR,eAAe;AACjB;;AAEA;EACE,wDAAwD;EACxD,YAAY;EACZ,WAAW;AACb;;AAEA;EACE,aAAa;;EAEb,6BAA6B;EAC7B,iEAAiE;AACnE;;AAEA;EACE,iEAAiE;AACnE;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,oBAAoB;EACpB,YAAY,EAAE,aAAa;AAC7B;;AAEA;AACA;;AAEA;EACE,aAAa;EACb,QAAQ;EACR,eAAe;EACf,gBAAgB;EAChB,WAAW;AACb;;AAEA;EACE,aAAa;EACb,QAAQ;AACV;;AAEA;EACE,wDAAwD;AAC1D;;AAEA;EACE,0DAA0D;AAC5D;;AAEA;EACE,WAAW;EACX,UAAU;AACZ;;AAEA;EACE,aAAa;EACb,uBAAuB;EACvB,SAAS;AACX;;AAEA;EACE,aAAa;EACb,uBAAuB;EACvB,SAAS;AACX;;AAEA;EACE,2BAA2B;AAC7B;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,qBAAqB;AACvB;;AAEA;EACE,YAAY;AACd",sourcesContent:[':root {\r\n  --player-primary-color: 61, 107, 255;\r\n  --computer-primary-color: 255, 168, 97;\r\n  --dark-blue: rgb(95, 98, 116);\r\n  --cell-color: rgb(227, 227, 227);\r\n}\r\n\r\n* {\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  padding: 0;\r\n  font-family: "Roboto", sans-serif;\r\n  color: var(--dark-blue);\r\n}\r\n\r\nmain {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n\r\n  margin: 50px;\r\n  justify-content: center;\r\n  gap: clamp(50px, 10vw, 120px);\r\n}\r\n\r\n.board-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  width: 350px;\r\n  gap: 16px;\r\n}\r\n\r\n.board {\r\n  display: grid;\r\n  grid-template-columns: repeat(11, 1fr);\r\n  grid-template-rows: repeat(11, 1fr);\r\n  width: 340px;\r\n  height: 340px;\r\n  flex-shrink: 0;\r\n  gap: 1px;\r\n}\r\n\r\n.grid-label {\r\n  align-content: center;\r\n  text-align: center;\r\n  font-size: 12px;\r\n}\r\n\r\n.cell {\r\n  border: 1px solid var(--cell-color);\r\n}\r\n\r\n.computer-container .cell {\r\n  cursor: pointer;\r\n}\r\n\r\n.player-container .ship {\r\n  background-color: rgb(var(--player-primary-color), 0.25);\r\n}\r\n\r\n.computer-container .ship {\r\n  /* For debugging computer */\r\n  /* background-color: rgba(255, 158, 61, 0.1); */\r\n}\r\n\r\n.hit,\r\n.miss {\r\n  cursor: default;\r\n}\r\n\r\n.player-container .hit {\r\n  background-color: rgb(var(--player-primary-color));\r\n}\r\n\r\n.computer-container .hit {\r\n  background-color: rgb(var(--computer-primary-color), 0.25);\r\n}\r\n\r\n.miss {\r\n  background-color: var(--dark-blue);\r\n}\r\n\r\n.computer-container .sunk {\r\n  background-color: rgb(var(--computer-primary-color));\r\n}\r\n\r\n.ships-container {\r\n  display: flex;\r\n  gap: 16px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.ship-piece {\r\n  display: flex;\r\n  gap: 1px;\r\n  cursor: pointer;\r\n}\r\n\r\n.ship-piece div {\r\n  background-color: rgb(var(--player-primary-color), 0.25);\r\n  height: 30px;\r\n  width: 30px;\r\n}\r\n\r\n.ship-3 {\r\n  display: flex;\r\n\r\n  width: calc((30px + 1px) * 5);\r\n  /* grid-template-columns: repeat(auto-fill, minmax(30px, 1fr)); */\r\n}\r\n\r\n.ship-2 {\r\n  /* grid-template-columns: repeat(auto-fill, minmax(30px, 1fr)); */\r\n}\r\n\r\n[data-horizontal="true"] {\r\n  flex-direction: row;\r\n}\r\n\r\n[data-horizontal="false"] {\r\n  flex-direction: column;\r\n}\r\n\r\n.disabled {\r\n  pointer-events: none;\r\n  opacity: 0.5; /* optional */\r\n}\r\n\r\n.description {\r\n}\r\n\r\n.ships-remaining-container {\r\n  display: flex;\r\n  gap: 8px;\r\n  flex-wrap: wrap;\r\n  margin-top: 36px;\r\n  width: 60px;\r\n}\r\n\r\n.ship-remaining-piece {\r\n  display: flex;\r\n  gap: 1px;\r\n}\r\n\r\n.player-container .ship-remaining-piece div {\r\n  background-color: rgba(var(--player-primary-color), 0.1);\r\n}\r\n\r\n.computer-container .ship-remaining-piece div {\r\n  background-color: rgba(var(--computer-primary-color), 0.2);\r\n}\r\n\r\n.ship-remaining-piece div {\r\n  height: 8px;\r\n  width: 8px;\r\n}\r\n\r\n.player-container {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 16px;\r\n}\r\n\r\n.computer-container {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 16px;\r\n}\r\n\r\n.computer-container .ships-remaining-container {\r\n  flex-direction: row-reverse;\r\n}\r\n\r\n.hidden {\r\n  visibility: hidden;\r\n}\r\n\r\n.game-result {\r\n  text-align: center;\r\n  white-space: pre-line;\r\n}\r\n\r\n.play-btn {\r\n  padding: 4px;\r\n}\r\n'],sourceRoot:""}]);const s=o},540:e=>{e.exports=function(e){var r=document.createElement("style");return e.setAttributes(r,e.attributes),e.insert(r,e.options),r}},659:e=>{var r={};e.exports=function(e,n){var t=function(e){if(void 0===r[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}r[e]=n}return r[e]}(e);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var r=e.insertStyleElement(e);return{update:function(n){!function(e,r,n){var t="";n.supports&&(t+="@supports (".concat(n.supports,") {")),n.media&&(t+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(t+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),t+=n.css,a&&(t+="}"),n.media&&(t+="}"),n.supports&&(t+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(t+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),r.styleTagTransform(t,e,r.options)}(r,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)}}}}},r={};function n(t){var a=r[t];if(void 0!==a)return a.exports;var i=r[t]={id:t,exports:{}};return e[t](i,i.exports,n),i.exports}n.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return n.d(r,{a:r}),r},n.d=(e,r)=>{for(var t in r)n.o(r,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},n.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),n.nc=void 0;var t=n(72),a=n.n(t),i=n(825),o=n.n(i),s=n(659),l=n.n(s),c=n(56),p=n.n(c),d=n(540),A=n.n(d),h=n(113),u=n.n(h),m=n(365),f={};f.styleTagTransform=u(),f.setAttributes=p(),f.insert=l().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=A(),a()(m.A,f),m.A&&m.A.locals&&m.A.locals;class g{constructor(e,r,n,t){this.row=e,this.col=r,this.length=n,this.health=n,this.coordinates=[],this.isHorizontal=t}hit(){this.health=Math.max(this.health-1,0)}isSunk(){return 0===this.health}toString(){return`Ship (${this.length})`}}class E{constructor(e){this.boardContainer=e,this.boardEle=e.querySelector(".board"),this.initalizeBoard(),this.boardContainer.addEventListener("click",e=>{const r=e.target;if(!r.classList.contains("cell"))return;const n=r.dataset.row,t=r.dataset.col;this.handleTapCell?.(n,t)})}initalizeBoard(){this.boardEle.replaceChildren();for(let e=0;e<11;e++)for(let r=0;r<11;r++){if(0===e&&0===r){const e=document.createElement("div");this.boardEle.appendChild(e);continue}if(0===e){const e=document.createElement("div");e.classList.add("grid-label"),e.textContent=`${String.fromCharCode("A".charCodeAt(0)+r-1)}`,this.boardEle.appendChild(e);continue}if(0===r){const r=document.createElement("div");r.classList.add("grid-label"),r.textContent=`${e}`,this.boardEle.appendChild(r);continue}const n=document.createElement("div");n.classList.add("cell"),n.dataset.row=e-1,n.dataset.col=r-1,this.boardEle.appendChild(n)}}updateUI(e){for(let r=0;r<10;r++)for(let n=0;n<10;n++)this.updateCell(e,r,n)}updateCell(e,r,n){const t=this.boardEle.querySelector(`.cell[data-row="${r}"][data-col="${n}"]`);e[r][n]instanceof g?t.classList.add("ship"):!0===e[r][n]?t.classList.add("hit"):!1===e[r][n]&&t.classList.add("miss")}clearBoard(){for(let e=0;e<10;e++)for(let r=0;r<10;r++){const n=this.boardEle.querySelector(`.cell[data-row="${e}"][data-col="${r}"]`);n.classList.remove("ship"),n.classList.remove("hit"),n.classList.remove("miss"),n.classList.remove("sunk")}}updateSunkUI(e){for(let[r,n]of e.coordinates)this.boardEle.querySelector(`.cell[data-row="${r}"][data-col="${n}"]`).classList.add("sunk");const r=e.shipId;this.boardContainer.querySelector(`[data-ship-id=${r}]`).remove()}restoreShipPieces(){const e=document.querySelector(".ships-container");e.replaceChildren();const r={"ship-5":5,"ship-4":4,"ship-3-1":3,"ship-3-2":3,"ship-2":2};for(const[n,t]of Object.entries(r)){const r=document.createElement("div");r.classList.add("ship-piece"),r.draggable=!0,r.dataset.horizontal=!0,r.dataset.shipId=n;for(let e=0;e<t;e++){const e=document.createElement("div");r.appendChild(e)}e.appendChild(r)}}restoreShipRemainingPieces(){const e=this.boardContainer.querySelector(".ships-remaining-container");e.replaceChildren();const r={"ship-5":5,"ship-4":4,"ship-3-1":3,"ship-3-2":3,"ship-2":2};for(const[n,t]of Object.entries(r)){const r=document.createElement("div");r.classList.add("ship-remaining-piece"),r.draggable=!0,r.dataset.horizontal=!0,r.dataset.shipId=n;for(let e=0;e<t;e++){const e=document.createElement("div");r.appendChild(e)}e.appendChild(r)}}}class C{constructor(e){this.gameBoard=e}}class y{constructor(){this.board=[],this.rows=10,this.cols=10;for(let e=0;e<this.rows;e++){const e=[];for(let r=0;r<this.cols;r++)e.push(null);this.board.push(e)}}placeShip(e){if(!this.#e(e))return!1;if(e.isHorizontal)for(let r=0;r<e.length;r++)this.board[e.row][e.col+r]=e,e.coordinates.push([e.row,e.col+r]);else for(let r=0;r<e.length;r++)this.board[e.row+r][e.col]=e,e.coordinates.push([e.row+r,e.col]);return!0}#e(e){if(e.isHorizontal)for(let r=0;r<e.length;r++){if(this.#r(e.row,e.col+r))return!1;if(null!==this.board[e.row][e.col+r])return!1}else for(let r=0;r<e.length;r++){if(this.#r(e.row+r,e.col))return!1;if(null!==this.board[e.row+r][e.col])return!1}return!0}#r(e,r){return e<0||e>=this.rows||r<0||r>=this.cols}receiveAttack(e,r){if(!0===this.board[e][r]||!1===this.board[e][r])throw new Error(`Already used cell: [${e}, ${r}] `);if(null!==this.board[e][r]){if(this.board[e][r]instanceof g){const n=this.board[e][r];return this.board[e][r]=!0,n.hit(),n}}else this.board[e][r]=!1}getMissedAttacks(){const e=[];for(let r=0;r<this.rows;r++)for(let n=0;n<this.cols;n++)!1===this.board[r][n]&&e.push([r,n]);return e}hasShips(){for(let e=0;e<this.rows;e++)for(let r=0;r<this.cols;r++)if(this.board[e][r]instanceof g)return!0;return!1}getAvailableCoordinates(){const e=[];for(let r=0;r<this.rows;r++)for(let n=0;n<this.cols;n++)"boolean"!=typeof this.board[r][n]&&e.push([r,n]);return e}placeRandomShips(){const e={"ship-5":5,"ship-4":4,"ship-3-1":3,"ship-3-2":3,"ship-2":2};for(const[r,n]of Object.entries(e))for(;;){const e=Math.floor(Math.random()*this.board.length),t=Math.floor(Math.random()*this.board[0].length),a=Math.random()<.5,i=new g(e,t,n,a);if(i.shipId=r,this.placeShip(i))break}}clear(){for(let e=0;e<this.rows;e++)for(let r=0;r<this.cols;r++)this.board[e][r]=null}}const b=document.querySelector(".player-container"),v=document.querySelector(".computer-container");let x=new E(b),B=new E(v),w=new class{constructor(e,r){this.playerBoardView=e,this.computerBoardView=r,this.init()}init(){this.playerBoardView.initalizeBoard(),this.computerBoardView.initalizeBoard()}}(x,B),S=new C(new y),k=new C(new y);new class{constructor(e,r,n){this.player=e,this.computer=r,this.view=n,this.gameOver=!1,this.playerTurn=!0,this.stack=[],this.visited=new Set,this.playerGameResultEle=document.querySelector(".player-container .game-result"),this.playerPlayBtn=document.querySelector(".player-container .play-btn"),this.computerGameResultEle=document.querySelector(".computer-container .game-result"),this.computerPlayBtn=document.querySelector(".computer-container .play-btn"),this.playerShipsContainer=document.querySelector(".ships-container"),this.playerShipsRemainingContainer=document.querySelector(".player-container .ships-remaining-container"),this.computerShipsRemainingContainer=document.querySelector(".computer-container .ships-remaining-container"),this.init(),this.addEventListeners()}init(){this.reset()}addEventListeners(){this.view.computerBoardView.handleTapCell=(e,r)=>{this.handlePlayerAttack(e,r)},this.view.playerBoardView.boardContainer.addEventListener("dragover",e=>{e.preventDefault()}),this.view.playerBoardView.boardContainer.addEventListener("drop",e=>{e.preventDefault();const r=e.target.closest(".cell");if(!r)return;const n=parseInt(r.dataset.row),t=parseInt(r.dataset.col),a=JSON.parse(e.dataTransfer.getData("application/json"));let i=new g(n,t,a.shipLength,a.horizontal);i.shipId=a.shipId,this.player.gameBoard.placeShip(i)&&(this.view.playerBoardView.updateUI(this.player.gameBoard.board),this.playerShipsContainer.querySelector(`[data-ship-id="${a.shipId}"]`).remove(),0===this.playerShipsContainer.children.length&&this.startGame())}),this.playerShipsContainer.addEventListener("dragstart",e=>{const r=e.target.closest(".ship-piece");if(!r)return;const n={shipLength:r.children.length,horizontal:"true"===r.dataset.horizontal,shipId:r.dataset.shipId};e.dataTransfer.setData("application/json",JSON.stringify(n)),e.dataTransfer.setDragImage(r,15,15)}),this.playerShipsContainer.addEventListener("click",e=>{const r=e.target.closest(".ship-piece");if(!r)return;const n="true"===r.dataset.horizontal;r.dataset.horizontal=n?"false":"true"}),this.playerPlayBtn.addEventListener("click",e=>{this.reset()}),this.computerPlayBtn.addEventListener("click",e=>{this.reset()})}handlePlayerAttack(e,r){if(!this.gameOver&&this.playerTurn)try{const n=this.computer.gameBoard.receiveAttack(e,r);if(n?.isSunk()&&(this.view.computerBoardView.updateSunkUI(n),!this.computer.gameBoard.hasShips()))return this.gameOver=!0,this.playerGameResultEle.textContent="Player Won!\n(◕‿◕✿)",void this.playerPlayBtn.classList.remove("hidden");this.view.computerBoardView.updateCell(this.computer.gameBoard.board,e,r),this.playerTurn=!1,this.handleComputerAttack()}catch(e){console.error(`Error handle player attack ${e.message}`)}}handleComputerAttack(){let e,r;if(this.stack.length){const n=this.stack.pop();e=n[0],r=n[1]}else{const n=this.player.gameBoard.getAvailableCoordinates(),t=n[Math.floor(Math.random()*n.length)];e=t[0],r=t[1]}const n=this.player.gameBoard.receiveAttack(e,r);if(this.view.playerBoardView.updateCell(this.player.gameBoard.board,e,r),n){if(n.isSunk()&&(this.view.playerBoardView.updateSunkUI(n),!this.player.gameBoard.hasShips()))return this.gameOver=!0,this.computerGameResultEle.textContent="Computer Won!\n( ͡° ͜ʖ ͡°)",void this.computerPlayBtn.classList.remove("hidden");const t=[[-1,0],[0,1],[1,0],[0,-1]];for(const[n,a]of t)e+n<0||e+n>=10||r+a<0||r+a>=10||"boolean"!=typeof this.player.gameBoard.board[e+n][r+a]&&(this.visited.has(`${e+n},${r+a}`)||(this.stack.push([e+n,r+a]),this.visited.add(`${e+n},${r+a}`)))}this.playerTurn=!0}reset(){this.playerTurn=!0,this.stack=[],this.visited.clear(),this.playerPlayBtn.classList.add("hidden"),this.computerPlayBtn.classList.add("hidden"),this.view.playerBoardView.restoreShipRemainingPieces(),this.view.playerBoardView.restoreShipPieces(),this.view.computerBoardView.restoreShipRemainingPieces(),this.player.gameBoard.clear(),this.view.playerBoardView.clearBoard(),this.computer.gameBoard.clear(),this.view.computerBoardView.clearBoard(),this.computer.gameBoard.placeRandomShips(),this.view.computerBoardView.updateUI(this.computer.gameBoard.board),this.playerGameResultEle.textContent="",this.computerGameResultEle.textContent="",document.querySelector(".computer-container").classList.add("disabled"),this.playerShipsRemainingContainer.classList.add("hidden"),this.computerShipsRemainingContainer.classList.add("hidden")}startGame(){document.querySelector(".computer-container").classList.remove("disabled"),this.gameOver=!1,this.playerShipsRemainingContainer.classList.remove("hidden"),this.computerShipsRemainingContainer.classList.remove("hidden")}}(S,k,w)})();
//# sourceMappingURL=main.js.map